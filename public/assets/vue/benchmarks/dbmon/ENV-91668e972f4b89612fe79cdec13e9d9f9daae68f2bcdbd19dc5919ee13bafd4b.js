var ENV=ENV||function(){function e(e){var a=parseFloat(e).toFixed(2);return e>60&&(minutes=Math.floor(e/60),comps=(e%60).toFixed(2).split("."),seconds=comps[0].lpad("0",2),ms=comps[1],a=minutes+":"+seconds+"."+ms),a}function a(e){var a="Query elapsed";return a+=e>=10?" warn_long":e>=1?" warn":" short"}function t(e){var a="label";return a+=e>=20?" label-important":e>=10?" label-warning":" label-success"}function r(t){t||(t={});var r=15*Math.random();return t.elapsed=r,t.formatElapsed=e(r),t.elapsedClassName=a(r),t.query="SELECT blah FROM something",t.waiting=Math.random()<.5,Math.random()<.2&&(t.query="<IDLE> in transaction"),Math.random()<.1&&(t.query="vacuum"),t}function s(e){if(!e)return{query:"***",formatElapsed:"",elapsedClassName:""};e.formatElapsed="",e.elapsedClassName="",e.query="",e.elapsed=null,e.waiting=null}function l(e,a,l){var n=Math.floor(10*Math.random()+1);if(e||(e={}),e.lastMutationId=l,e.nbQueries=n,e.lastSample||(e.lastSample={}),e.lastSample.topFiveQueries||(e.lastSample.topFiveQueries=[]),a){if(!e.lastSample.queries){e.lastSample.queries=[];for(var o=0;o<12;o++)e.lastSample.queries[o]=s()}for(var u in e.lastSample.queries){var i=e.lastSample.queries[u];u<=n?r(i):s(i)}}else{e.lastSample.queries=[];for(u=0;u<12;u++)if(u<n){i=r(s());e.lastSample.queries.push(i)}else e.lastSample.queries.push(s())}for(var m=0;m<5;m++){var p=e.lastSample.queries[m];e.lastSample.topFiveQueries[m]=p}return e.lastSample.nbQueries=n,e.lastSample.countClassName=t(n),e}function n(e){var a=u;if(!e){u=[];for(var t=1;t<=ENV.rows;t++)u.push({dbname:"cluster"+t,query:"",formatElapsed:"",elapsedClassName:""}),u.push({dbname:"cluster"+t+" slave",query:"",formatElapsed:"",elapsedClassName:""})}if(!u){u=[];for(t=1;t<=ENV.rows;t++)u.push({dbname:"cluster"+t}),u.push({dbname:"cluster"+t+" slave"});a=u}for(var t in u){var r=u[t];!e&&a&&a[t]&&(r.lastSample=a[t].lastSample),!r.lastSample||Math.random()<ENV.mutations()?(m+=1,e||(r.lastSample=null),l(r,e,m)):u[t]=a[t]}return!1,{toArray:function(){return u}}}function o(e){return e?p=e:p}var u,i,m=0;(i=String.prototype).lpad||(i.lpad=function(e,a){return e.repeat((a-this.length)/e.length).concat(this)});var p=.5,d=document.querySelector("body"),c=d.firstChild,f=document.createElement("div");f.style.cssText="display: flex";var v=document.createElement("input"),h=document.createElement("label");return h.innerHTML="mutations : "+(100*p).toFixed(0)+"%",h.id="ratioval",v.setAttribute("type","range"),v.style.cssText="margin-bottom: 10px; margin-top: 5px",v.addEventListener("change",function(e){ENV.mutations(e.target.value/100),document.querySelector("#ratioval").innerHTML="mutations : "+(100*ENV.mutations()).toFixed(0)+"%"}),f.appendChild(h),f.appendChild(v),d.insertBefore(f,c),{generateData:n,rows:50,timeout:0,mutations:o}}();